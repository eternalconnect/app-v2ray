<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>دانلود V2rayNG</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap');

:root{
    --primary: #2563eb;
    --primary-dark: #1e40af;
    --primary-light: #93c5fd;
    --secondary: #64748b;
    --light: #f8fafc;
    --dark: #1e293b;
    --gray: #e2e8f0;
    --success: #10b981;
    --gradient-start: #3b82f6;
    --gradient-end: #1d4ed8;
    --bg-primary: #f8fafc;
    --bg-secondary: #ffffff;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --border-color: #e2e8f0;
    --shadow-color: rgba(0,0,0,0.1);
    --container-bg: rgba(255,255,255,0.95);
    --input-bg: #ffffff;
    --result-bg: #f1f5f9;
    --icon-filter: none;
    --placeholder-color: #64748b;
}

.dark-mode{
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --border-color: #334155;
    --shadow-color: rgba(0,0,0,0.3);
    --container-bg: rgba(30,41,59,0.9);
    --input-bg: rgba(15,23,42,0.6);
    --result-bg: rgba(15,23,42,0.6);
    --icon-filter: invert(1);
    --placeholder-color: #cbd5e1;
}

*{
    margin:0; padding:0; box-sizing:border-box;
    font-family: 'Vazirmatn', sans-serif;
    transition: background-color 0.3s, color 0.3s, border-color 0.3s;
}

body{
    background: var(--bg-primary);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
    color:var(--text-primary);
}

.container{
    background: var(--container-bg);
    backdrop-filter: blur(12px);
    border-radius:24px;
    box-shadow: 0 15px 35px var(--shadow-color);
    width:100%;
    max-width:700px;
    overflow:hidden;
    padding:0;
    border:1px solid var(--border-color);
}

.header{
    background: linear-gradient(135deg,var(--gradient-start),var(--gradient-end));
    padding:30px;
    text-align:center;
    position:relative;
    overflow:hidden;
}
.header::before{
    content:"";
    position:absolute;
    top:-50%;
    left:-50%;
    width:200%;
    height:200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    transform: rotate(30deg);
}

.header h1{color:white;font-size:32px;margin-bottom:10px;font-weight:700;text-shadow:0 2px 4px rgba(0,0,0,0.2);}
.header p{color: rgba(255,255,255,0.9); font-size:16px;}
.creator{margin-top:15px;font-size:14px;color: rgba(255,255,255,0.7);}
.creator a{color:inherit;text-decoration:none;transition:color 0.3s;}
.creator a:hover{color:#fff;text-decoration:underline;}

.theme-toggle{
    position:absolute;
    top:20px; left:20px;
    appearance:none;-webkit-appearance:none;-moz-appearance:none;
    background: rgba(255,255,255,0.2); border:none;
    width:40px; height:40px; min-width:40px; min-height:40px;
    padding:0; border-radius:50%;
    display:inline-flex; align-items:center; justify-content:center; line-height:1;
    color:white; font-size:18px; cursor:pointer; transition:all 0.3s; z-index:10; box-sizing:border-box; overflow:hidden;
}
.theme-toggle::before{ display:none; content:none; }
.theme-toggle:hover{background: rgba(255,255,255,0.3); transform:rotate(30deg);}

.content{padding:30px;}
.input-group{margin-bottom:30px;}
.input-group label{display:block;margin-bottom:10px;color: var(--primary);font-weight:500;font-size:16px;}
.dark-mode .input-group label{color: var(--success);}
.input-group label .icon{color:inherit;}

select{
    width:100%;
    padding:16px;
    border:2px solid var(--border-color);
    border-radius:14px;
    font-size:16px;
    background-color: var(--input-bg);
    color: var(--text-primary);
    cursor:pointer;
    appearance:none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%2364748b'%3e%3cpath d='M7 10l5 5 5-5H7z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: left 1rem center;
    background-size:1.2em;
    padding-left:3rem;
    transition:border-color 0.3s;
    unicode-bidi: plaintext;
}
select:focus, select:hover{border-color: var(--primary); outline:none;}

button{
    background: linear-gradient(to right,var(--primary),var(--primary-dark));
    color:white;
    border:none;
    padding:17px 25px;
    border-radius:14px;
    font-size:16px;
    font-weight:500;
    cursor:pointer;
    transition:all 0.3s;
    width:100%;
    margin-bottom:30px;
    box-shadow: 0 5px 15px rgba(37,99,235,0.3);
    position: relative;
    overflow:hidden;
}
button::before{
    content:"";
    position:absolute;
    top:0; left:-100%;
    width:100%; height:100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition:0.5s;
}
button:hover::before{left:100%;}
button:hover{transform:translateY(-3px); box-shadow:0 8px 20px rgba(37,99,235,0.4);}
button:active{transform:translateY(0);}

.guide{
    margin-top:0;
    padding:15px;
    border-radius:12px;
    background: var(--result-bg);
    color: var(--text-secondary);
    font-size:14px;
    line-height:1.7;
    text-align:justify;
}
.guide h3{margin-bottom:10px;color: var(--primary);font-size:16px;}
.dark-mode .guide h3{color: var(--success);}

/* fixes for pre and text direction */
pre{
    white-space: pre-wrap;
    word-break: break-all;
    font-family: monospace;
    line-height:1.5;
    unicode-bidi: plaintext;
    text-align: start;
}
input, textarea{unicode-bidi: plaintext;}

@media(max-width:768px){.container{padding:0}.header{padding:25px 20px}.header h1{font-size:26px}.content{padding:25px 20px}input,textarea,button{padding:14px}}
</style>
</head>
<body class="light-mode">
<div class="container">
    <div class="header">
        <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>
        <h1>دانلود V2rayNG</h1>
        <p>نسخه مورد نظر خود را انتخاب کرده و دانلود کنید.</p>
        <div class="creator">
  <a href="https://t.me/eternal_connect" target="_blank" rel="noopener noreferrer">
    ساخته شده توسط Eternal Connect
  </a>
</div>

    </div>
    <div class="content">
        <div class="input-group">
            <label for="versionSelect">انتخاب نسخه <i class="fas fa-download icon"></i></label>
            <select id="versionSelect"></select>
        </div>
        <button id="downloadBtn"><i class="fas fa-cloud-download-alt"></i> دانلود نسخه موردنظر</button>
        <div class="guide">
            <h3>راهنما</h3>
            <p>پس از انتخاب نسخه مورد نظر و کلیک روی دکمه دانلود، فایل نصب universal به صورت مستقیم از مخزن رسمی GitHub دانلود خواهد شد.<br>پیشنهاد می‌شود همیشه آخرین نسخه را دریافت کنید تا از رفع باگ‌ها و امکانات جدید بهره‌مند شوید.</p>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', async function(){
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    const versionSelect = document.getElementById('versionSelect');
    const downloadBtn = document.getElementById('downloadBtn');

    if(localStorage.getItem('darkMode')==='enabled'){
        body.classList.add('dark-mode');
        themeToggle.innerHTML='<i class="fas fa-sun"></i>';
    }

    themeToggle.addEventListener('click', function(){
        body.classList.toggle('dark-mode');
        if(body.classList.contains('dark-mode')){
            localStorage.setItem('darkMode','enabled');
            themeToggle.innerHTML='<i class="fas fa-sun"></i>';
        }else{
            localStorage.setItem('darkMode','disabled');
            themeToggle.innerHTML='<i class="fas fa-moon"></i>';
        }
    });

    function detectTextDirection(text){
        const rtl = /[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;
        return rtl.test(text)?'rtl':'ltr';
    }

    function applyDirectionToSelectAndPre(){
        const pre = document.querySelector('pre');
        if(pre) pre.style.direction = detectTextDirection(pre.textContent);
        pre.style.textAlign = pre.style.direction==='rtl'?'right':'left';
    }

    async function fetchReleases(){
        try{
            const res = await fetch("https://api.github.com/repos/2dust/v2rayNG/releases");
            const releases = await res.json();
            releases.forEach((rel,i)=>{
                const option = document.createElement("option");
                option.value=rel.tag_name;
                option.textContent=rel.tag_name;
                if(i===0) option.selected=true;
                versionSelect.appendChild(option);
            });
        }catch(e){console.error(e);}
    }
    fetchReleases();

    downloadBtn.addEventListener('click',function(){
        const version = versionSelect.value;
        if(version){
            window.location.href=`https://github.com/2dust/v2rayNG/releases/download/${version}/v2rayNG_${version}_universal.apk`;
        }
    });
});
</script>
</body>
</html>
